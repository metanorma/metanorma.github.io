---
layout: author-docs
title: Figures
---

== Figures

=== General

In standardization documents, figures are used as document elements to present
non-textual material so that they are independently referable.

In Metanorma, the usage of the `image` command will result in a figure.
Please refer to link:/author/topics/blocks/images[images] for details
of the `image` command.


=== Blocks

An image block in isolation is treated as a figure:

[source,asciidoc]
--
.Figure title
image::figure-path.png[]
--

A more complex figure can be marked up as an example block, with the `[figure]` style attribute:

[source,asciidoc]
--
[figure]
.Figure title
====
image::figure-path.png[]

This is some random explanatory text

NOTE: And this is a note
====
--

=== Key

Like formulae, figures can be followed by a definition list for the variables used in the figure.
This definition list is marked up with `[%key]` [added in https://github.com/metanorma/metanorma-standoc/releases/tag/v1.6.3].

The syntax is as follows:

[source,asciidoc]
--
[[some-anchor]] <1>
.Figure title <2>
image::figure-path.png[] <3>

[%key] <4>
{some-id}:: {some-description} <5>
--
<1> Optional anchor for referencing
<2> Title of the figure
<3> The image command with path
<4> Specification of figure key section
<5> Key entry: `{some-description}` is text that describes information about the thing
represented by `{some-id}`


[example]
.Example of providing a key for a figure (ISO Rice document)
====
[source,asciidoc]
--
.Typical gelatinization curve
image::rice_images/rice_image2.png[]
footnote:[The time stem:[t_90] was estimated to be 18,2 min for this example.]

[%key]
stem:[w]:: mass fraction of gelatinized kernels, expressed in per cent
stem:[t]:: cooking time, expressed in minutes
stem:[t_90]:: time required to gelatinize 90 % of the kernels
P:: point of the curve corresponding to a cooking time of stem:[t_90]

NOTE: These results are based on a study carried out on three different types of kernel.
--
====

The key definition list can also be preceded by a paragraph consisting of
`\*Key*`, though that is not recommended.

[example]
.Example of providing a key for a figure using the `\*Key*` syntax (ISO Rice document)
====
[source,asciidoc]
----
.Typical gelatinization curve
image::rice_images/rice_image2.png[alt text]
footnote:[The time stem:[t_90] was estimated to be 18,2 min for this example.]

*Key*

stem:[w]:: mass fraction of gelatinized kernels, expressed in per cent
stem:[t]:: cooking time, expressed in minutes
stem:[t_90]:: time required to gelatinize 90 % of the kernels
P:: point of the curve corresponding to a cooking time of stem:[t_90]

NOTE: These results are based on a study carried out on three different types of kernel.
----
====


=== Data URLs as images

Metanorma allows Data URLs as the URL for an image:

[source,asciidoc]
--
image::data:image/png;base64,ivBO[alt text]
--

NOTE: Data URLs are not typically supported by AsciiDoc processors.


=== Discursive figures

A discursive figure, containing text as well as images, can be marked up as an
example, with a `[.figure]` role [added in https://github.com/metanorma/metanorma-standoc/releases/tag/v2.0.7]:

[source,asciidoc]
--
[.figure]
.Typical gelatinization curve
====
image::rice_images/rice_image2.png[alt text]

This is lots of discursive text
====
--


=== Subfigures

Subfigures (which appear in ISO formats, for example) are entered by including
images in an example block.

[source,asciidoc]
--
.Stages of gelatinization
====
.Initial stages: No grains are fully gelatinized (ungelatinized starch granules are visible inside the kernels)
image::rice_images/rice_image3_1.png[]

.Intermediate stages: Some fully gelatinized kernels are visible
image::rice_images/rice_image3_2.png[]

.Final stages: All kernels are fully gelatinized
image::rice_images/rice_image3_3.png[]
====
--

=== Image size

The size of an image can be modified via the `height` and `width` attributes.

By default, both `height` and `width` are set to the value `auto`, which means
that the image will be shown according to the best visual settings determined
by Metanorma.

Image dimensions can also be fixed with pixel values with `px`.

NOTE: The pixel is the only supported unit in image sizing right now.

====
.Image resizing specifying `height` and `width` attributes in pixels
[source]
----
image::logo.jpg[height=150px,width=100px]
----
====

In the `height` and `width` attributes, the `px` suffix may be omitted.


====
.Image resizing with values omitting `px` unit
[source,asciidoc]
--
image::logo.jpg[height=150,width=100]
--
====

The `auto` value indicates that the dimension does not have a fixed size but
retain the aspect ratio of the original image.

====
.Aspect ratio is retained with `width` set to `auto` based on the value of `height`
[source,asciidoc]
--
image::logo.jpg[height=150,width=auto]
--
====

An unspecified dimension is considered `auto`.

====
.Aspect ratio is retained when setting `height` but not `width`
[source,asciidoc]
--
image::logo.jpg[height=150]
--
====

Image sizes can also be specified with percentages of the original width,
e.g. `width='50%'` [added in https://github.com/metanorma/isodoc/releases/tag/v2.8.0].

NOTE: Treatment of image resizing may slightly differ across output formats.



=== Captions and titles

As elsewhere in Metanorma, the caption of an image (of the figure containing the image)
is set with a line prefixed with dot above the image.

[source,asciidoc]
--
.Caption
image::logo.jpg[]
--

[source,asciidoc]
--
image::logo.jpg[title=Caption]
--

NOTE: Similar to Asciidoctor AsciiDoc, the `title` attribute is treated as
identical to the dot-prefixed caption.


Metanorma supports a `title` attribute on images for accessibility, which is
distinct from the figure caption.
This is entered in Metanorma as the `titleattr` attribute:

[source,asciidoc]
--
[titleattr=Title Attribute]
image::logo.jpg
--

Or

[source,asciidoc]
--
image::logo.jpg[titleattr=Title Attribute]
--

Both captions and titles could be used together.

[source,asciidoc]
--
.Rice husk separation in rice farm at Breton near Dinan
image::logo.jpg[titleattr=Photo of rice husks being separated]
--

NOTE: The `titleattr` attribute does not get rendered in Word output due to Word
limitations. Word only supports a single image "`Alt Text`", which would be set
by the caption.
Word's description of "`Alt Text`" is:
"`How would you describe this object and its context to someone who is blind?`".


=== Preformatted blocks

Figures can include preformatted blocks, as well as images.

For accessibility, preformatted blocks can be provided with an `alt` text
attribute [added in https://github.com/metanorma/metanorma-standoc/releases/tag/v1.3.10].

[sources,asciidoc]
----
[alt=ASCII art of a dog]
....
     ___^_
   /    | \__/\
    \   /  ^ ^|
   / \_/   0  0_
  /             \
 /     ___     0 |
/      /  \___ _/
....
----

=== Figure classes

Figures in documents can belong to different classes (e.g. _Plate_, _Chart_, _Diagram_),
each of which can be auto-numbered and captioned differently. In order to achieve this,
the desired class can be indicated
through the `class` attribute [added in https://github.com/metanorma/metanorma-standoc/releases/tag/v2.2.5].

[source,asciidoc]
--
[class=plate]
.Rice husk separation in rice farm at Breton near Dinan
image::logo.jpg[]
--

=== Figure sources

When a figure is marked up as a block, it can incorporate an indication of its source,
which in Metanorma is expected to be a bibliographical reference, just as with
term sources [added in https://github.com/metanorma/metanorma-standoc/releases/tag/v2.4.2].

[source,asciidoc]
--
[figure]
.Rice husk separation
====
image::logo.jpg[]

[.source]
<<iso1212>>, reformatted
====
--
